<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>M3U8播放器在线 - 免费HLS视频播放工具 | ArtPlayer驱动</title>
    <meta name="description" content="无需安装，在线播放M3U8、MP4视频，支持HLS自适应码率、弹幕、字幕、截图、倍速。基于ArtPlayer，手机、电脑即开即播。">
    <meta name="keywords" content="m3u8播放器,hls播放器,在线m3u8,在线hls,artplayer网页播放器">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="./css/styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3530207113372131"
    crossorigin="anonymous"></script>
</head>

<body>
    <!-- 顶部菜单栏 -->
    <div class="topbar">
        <a href="index.html" class="active">首页</a>
        <a href="docs.html">文章页</a>
    </div>


    <div class="shell">
        <div class="nav">
            <div class="brand">
                <span class="dot"></span>
                <span>M3U8 播放器</span>
            </div>
            <div class="controls">
                <div class="input">
                    <input id="urlInput" type="text" placeholder="请输入 m3u8 或 mp4 地址"
                        value="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">
                </div>
                <button class="btn secondary" onclick="loadDemo()">示例</button>
                <button class="btn" onclick="playVideo()">播放</button>
            </div>
        </div>

        <div id="alert" class="alert"></div>

        <div class="card player-card">
            <div id="player"></div>
        </div>

        <div class="remark">
            <h3>什么是ArtPlayer？</h3>
            <p>
                ArtPlayer — 轻量级、全功能 HTML5 视频播放器,支持 MP4 / HLS / FLV / WebM 等主流格式，并内置弹幕、字幕、清晰度切换、截图、画中画、倍速播放等丰富功能。
            </p>

            <h3>什么是m3u8文件？</h3>
            <p>
                <strong>M3U8</strong> 是一种基于 UTF-8 编码的播放列表（playlist）文本文件，扩展名为 <code>.m3u8</code>。
                它本身并不包含视频数据，而是按顺序列出若干 <em>TS 切片</em>（小片段）或不同清晰度的子流地址，供播放器按需拉取并无缝拼接播放，因此是实现 <strong>HLS（HTTP Live
                    Streaming）</strong> 的核心文件。
            </p>


            <h3>核心特点</h3>
            <ul>
                <li>📡 <strong>自适应码率</strong>：同一 M3U8 可引用 240p、480p、720p 等多条子流，播放器根据网络实时切换。</li>
                <li>🧩 <strong>切片传输</strong>：视频被切成 2-10 秒小片段，降低首帧等待并支持边下边播。</li>
                <li>🌐 <strong>纯 HTTP 分发</strong>：无需特殊协议，任何 CDN、Nginx、Apache 均可直接托管。</li>
                <li>📝 <strong>纯文本格式</strong>：可用任意编辑器查看，方便调试与二次开发。</li>
            </ul>

            <h3>典型结构示例</h3>
            <pre><code class="language-text">#EXTM3U
#EXT-X-VERSION:3
#EXT-X-TARGETDURATION:6
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:6.000,
segment0.ts
#EXTINF:6.000,
segment1.ts
#EXT-X-ENDLIST
</code></pre>

        </div>

        <div class="wise_saying">
            <b>锲而不舍，金石可镂。——《荀子·劝学》</b>
        </div>

        <div class="footer">
            <!-- 友链直接硬编码在这里 -->
            <div class="friend-links">
                <h3>友情链接</h3>
                <div class="links-container">
                    <a href="./website/sitemap.xml" target="_blank" rel="noopener">站点地图</a>
                    <a href="https://www.csdn.net/" target="_blank" rel="noopener">CSDN</a>
                    <a href="https://www.cnblogs.com/" target="_blank" rel="noopener">博客园</a>
                    <a href="https://artplayer.org/" target="_blank" rel="noopener">ArtPlayer 官网</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/artplayer@5/dist/artplayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <script>
        let art = null;

        function isValidUrl(str) {
            try { new URL(str); return true } catch (_) { return false }
        }

        function showAlert(text) {
            const el = document.getElementById('alert');
            el.textContent = text;
            el.style.display = text ? 'block' : 'none';
        }

        function loadDemo() {
            const demo = 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8';
            document.getElementById('urlInput').value = demo;
            playVideo();
        }

        function createArt(url) {
            if (art) art.destroy();
            art = new Artplayer({
                container: '#player',
                url: url,
                autoplay: false,
                muted: false,
                volume: 0.8,
                playsInline: true,
                theme: '#00b894',
                screenshot: true,
                playbackRate: true,
                fullscreen: true,
                fullscreenWeb: true,
                pip: true,
                hotkey: true,
                mutex: true,
                setting: true,
                autoSize: true,
                moreVideoAttr: { crossOrigin: 'anonymous' }
            });
            return art;
        }

        function setupHlsIfNeeded(url) {
            if (url.includes('.m3u8') && !art.video.canPlayType('application/vnd.apple.mpegurl')) {
                if (!Hls.isSupported()) {
                    showAlert('当前浏览器不支持 HLS 播放');
                    return;
                }
                const hls = new Hls({ enableWorker: true, lowLatencyMode: true });
                hls.loadSource(url);
                hls.attachMedia(art.video);
                hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function (_, data) {
                    if (data && data.audioTracks && data.audioTracks.length > 0) {
                        const idx = data.audioTracks.findIndex(function (t) { return t.default; });
                        hls.audioTrack = idx >= 0 ? idx : 0;
                    }
                });
                hls.on(Hls.Events.MANIFEST_PARSED, function () {
                    try {
                        art.muted = false;
                        if (art.volume === 0) art.volume = 0.8;
                    } catch (e) { }
                });
                hls.on(Hls.Events.ERROR, function (_, data) {
                    if (data && data.fatal) {
                        showAlert('HLS 播放发生错误：' + data.type);
                    }
                });
            }
        }

        function playVideo() {
            showAlert('');
            const url = document.getElementById('urlInput').value.trim();
            if (!url) return showAlert('请先填写播放地址');
            if (!isValidUrl(url)) return showAlert('请输入有效的 URL');
            const a = createArt(url);
            setupHlsIfNeeded(url);
            a.on('video:error', function () { showAlert('视频播放失败，请检查地址或跨域配置'); });
        }

        window.addEventListener('DOMContentLoaded', function () {
            const initial = document.getElementById('urlInput').value;
            if (initial) playVideo();
        });
    </script>
</body>

</html>